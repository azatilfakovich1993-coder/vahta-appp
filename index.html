<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–í–∞—Ö—Ç–∞ –†–∞–±–æ—Ç–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 16px;
            padding-bottom: 80px;
        }

        .header {
            background: var(--tg-theme-secondary-bg-color, #f4f4f5);
            padding: 20px 16px;
            margin: -16px -16px 20px -16px;
            border-bottom: 1px solid var(--tg-theme-hint-color, #e0e0e0);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .header p {
            color: var(--tg-theme-hint-color, #707579);
            font-size: 14px;
        }

        .role-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 24px;
        }

        .role-btn {
            padding: 16px;
            border: 2px solid var(--tg-theme-button-color, #3390ec);
            border-radius: 12px;
            background: transparent;
            color: var(--tg-theme-button-color, #3390ec);
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .role-btn.active {
            background: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
        }

        .role-btn:active {
            transform: scale(0.98);
        }

        .btn {
            background: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            padding: 14px 20px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: opacity 0.2s;
            margin-top: 12px;
        }

        .btn:active {
            opacity: 0.8;
        }

        .btn-secondary {
            background: var(--tg-theme-secondary-bg-color, #f4f4f5);
            color: var(--tg-theme-text-color, #000000);
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .card {
            background: var(--tg-theme-secondary-bg-color, #f4f4f5);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .card:active {
            transform: scale(0.98);
        }

        .card-title {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .card-info {
            font-size: 14px;
            color: var(--tg-theme-hint-color, #707579);
            margin-bottom: 4px;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-top: 8px;
        }

        .badge-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-approved {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-rejected {
            background: #fee2e2;
            color: #991b1b;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-size: 14px;
            font-weight: 500;
            color: var(--tg-theme-text-color, #000000);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--tg-theme-hint-color, #e0e0e0);
            border-radius: 8px;
            font-size: 15px;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--tg-theme-hint-color, #e0e0e0);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            padding: 12px 16px;
            background: transparent;
            border: none;
            color: var(--tg-theme-hint-color, #707579);
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            color: var(--tg-theme-button-color, #3390ec);
            border-bottom-color: var(--tg-theme-button-color, #3390ec);
        }

        .filters {
            background: var(--tg-theme-secondary-bg-color, #f4f4f5);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--tg-theme-hint-color, #707579);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .hidden {
            display: none !important;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: var(--tg-theme-hint-color, #707579);
        }

        .back-btn {
            background: none;
            border: none;
            color: var(--tg-theme-button-color, #3390ec);
            font-size: 16px;
            padding: 8px 0;
            cursor: pointer;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .detail-section {
            margin-bottom: 20px;
        }

        .detail-section h3 {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--tg-theme-hint-color, #707579);
        }

        .detail-section p {
            font-size: 16px;
            line-height: 1.5;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }

        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--tg-theme-button-color, #3390ec);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 1000;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                transform: translate(-50%, -100%);
                opacity: 0;
            }
            to {
                transform: translate(-50%, 0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏ -->
        <div id="welcomeScreen">
            <div class="header">
                <h1>üèóÔ∏è –í–∞—Ö—Ç–∞ –†–∞–±–æ—Ç–∞</h1>
                <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–¥–±–æ—Ä–∞ –≤–∞—Ö—Ç–æ–≤—ã—Ö —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤</p>
            </div>
            <div class="role-selector">
                <button class="role-btn" onclick="selectRole('employer')">
                    üëî –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å
                </button>
                <button class="role-btn" onclick="selectRole('worker')">
                    üë∑ –ò—â—É —Ä–∞–±–æ—Ç—É
                </button>
            </div>
            <button class="btn btn-secondary" onclick="showAdminPanel()">
                üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
            </button>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è -->
        <div id="employerScreen" class="hidden">
            <button class="back-btn" onclick="backToWelcome()">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>–ö–∞–±–∏–Ω–µ—Ç —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è</h1>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="switchEmployerTab('vacancies')">–ú–æ–∏ –≤–∞–∫–∞–Ω—Å–∏–∏</button>
                <button class="tab" onclick="switchEmployerTab('candidates')">–ö–∞–Ω–¥–∏–¥–∞—Ç—ã</button>
                <button class="tab" onclick="switchEmployerTab('responses')">–û—Ç–∫–ª–∏–∫–∏</button>
            </div>

            <div id="employerVacancies">
                <button class="btn" onclick="showCreateVacancy()">+ –°–æ–∑–¥–∞—Ç—å –≤–∞–∫–∞–Ω—Å–∏—é</button>
                <div id="vacanciesList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>

            <div id="employerCandidates" class="hidden">
                <div class="filters">
                    <div class="form-group">
                        <select class="form-select" id="filterSpecialty" onchange="filterCandidates()">
                            <option value="">–í—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <select class="form-select" id="filterExperience" onchange="filterCandidates()">
                            <option value="">–õ—é–±–æ–π –æ–ø—ã—Ç</option>
                            <option value="0-1">–î–æ 1 –≥–æ–¥–∞</option>
                            <option value="1-3">1-3 –≥–æ–¥–∞</option>
                            <option value="3-5">3-5 –ª–µ—Ç</option>
                            <option value="5+">–ë–æ–ª–µ–µ 5 –ª–µ—Ç</option>
                        </select>
                    </div>
                </div>
                <div id="candidatesList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>

            <div id="employerResponses" class="hidden">
                <div id="responsesList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏ -->
        <div id="createVacancyScreen" class="hidden">
            <button class="back-btn" onclick="backToEmployer()">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>–°–æ–∑–¥–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏</h1>
            </div>
            
            <form id="vacancyForm" onsubmit="submitVacancy(event)">
                <div class="form-group">
                    <label class="form-label">–î–æ–ª–∂–Ω–æ—Å—Ç—å *</label>
                    <input type="text" class="form-input" id="vacancyPosition" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û–±—ä–µ–∫—Ç *</label>
                    <input type="text" class="form-input" id="vacancyObject" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–†–µ–≥–∏–æ–Ω *</label>
                    <input type="text" class="form-input" id="vacancyRegion" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ó–∞—Ä–ø–ª–∞—Ç–∞ (‚ÇΩ) *</label>
                    <input type="number" class="form-input" id="vacancySalary" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã *</label>
                    <input type="text" class="form-input" id="vacancySchedule" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 15/15, 30/30" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å *</label>
                    <select class="form-select" id="vacancySpecialty" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</option>
                        <option value="–°–≤–∞—Ä—â–∏–∫">–°–≤–∞—Ä—â–∏–∫</option>
                        <option value="–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫">–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫</option>
                        <option value="–≠–ª–µ–∫—Ç—Ä–∏–∫">–≠–ª–µ–∫—Ç—Ä–∏–∫</option>
                        <option value="–°–ª–µ—Å–∞—Ä—å">–°–ª–µ—Å–∞—Ä—å</option>
                        <option value="–¢–æ–∫–∞—Ä—å">–¢–æ–∫–∞—Ä—å</option>
                        <option value="–§—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫">–§—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫</option>
                        <option value="–ú–∞–ª—è—Ä">–ú–∞–ª—è—Ä</option>
                        <option value="–®—Ç—É–∫–∞—Ç—É—Ä">–®—Ç—É–∫–∞—Ç—É—Ä</option>
                        <option value="–ö–∞–º–µ–Ω—â–∏–∫">–ö–∞–º–µ–Ω—â–∏–∫</option>
                        <option value="–ë–µ—Ç–æ–Ω—â–∏–∫">–ë–µ—Ç–æ–Ω—â–∏–∫</option>
                        <option value="–ê—Ä–º–∞—Ç—É—Ä—â–∏–∫">–ê—Ä–º–∞—Ç—É—Ä—â–∏–∫</option>
                        <option value="–ö—Ä–∞–Ω–æ–≤—â–∏–∫">–ö—Ä–∞–Ω–æ–≤—â–∏–∫</option>
                        <option value="–°—Ç—Ä–æ–ø–∞–ª—å—â–∏–∫">–°—Ç—Ä–æ–ø–∞–ª—å—â–∏–∫</option>
                        <option value="–û–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞–Ω–∫–æ–≤">–û–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞–Ω–∫–æ–≤</option>
                        <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏</label>
                    <textarea class="form-textarea" id="vacancyDescription"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–£—Å–ª–æ–≤–∏—è –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è</label>
                    <textarea class="form-textarea" id="vacancyHousing"></textarea>
                </div>
                
                <button type="submit" class="btn">–°–æ–∑–¥–∞—Ç—å –≤–∞–∫–∞–Ω—Å–∏—é</button>
            </form>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è -->
        <div id="workerScreen" class="hidden">
            <button class="back-btn" onclick="backToWelcome()">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç—ã</h1>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="switchWorkerTab('vacancies')">–í–∞–∫–∞–Ω—Å–∏–∏</button>
                <button class="tab" onclick="switchWorkerTab('profile')">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</button>
                <button class="tab" onclick="switchWorkerTab('myResponses')">–ú–æ–∏ –æ—Ç–∫–ª–∏–∫–∏</button>
            </div>

            <div id="workerVacancies">
                <div class="filters">
                    <div class="form-group">
                        <select class="form-select" id="filterVacancySpecialty" onchange="filterVacancies()">
                            <option value="">–í—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</option>
                            <option value="–°–≤–∞—Ä—â–∏–∫">–°–≤–∞—Ä—â–∏–∫</option>
                            <option value="–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫">–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫</option>
                            <option value="–≠–ª–µ–∫—Ç—Ä–∏–∫">–≠–ª–µ–∫—Ç—Ä–∏–∫</option>
                            <option value="–°–ª–µ—Å–∞—Ä—å">–°–ª–µ—Å–∞—Ä—å</option>
                            <option value="–¢–æ–∫–∞—Ä—å">–¢–æ–∫–∞—Ä—å</option>
                            <option value="–§—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫">–§—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫</option>
                            <option value="–ú–∞–ª—è—Ä">–ú–∞–ª—è—Ä</option>
                            <option value="–®—Ç—É–∫–∞—Ç—É—Ä">–®—Ç—É–∫–∞—Ç—É—Ä</option>
                            <option value="–ö–∞–º–µ–Ω—â–∏–∫">–ö–∞–º–µ–Ω—â–∏–∫</option>
                            <option value="–ë–µ—Ç–æ–Ω—â–∏–∫">–ë–µ—Ç–æ–Ω—â–∏–∫</option>
                            <option value="–ê—Ä–º–∞—Ç—É—Ä—â–∏–∫">–ê—Ä–º–∞—Ç—É—Ä—â–∏–∫</option>
                            <option value="–ö—Ä–∞–Ω–æ–≤—â–∏–∫">–ö—Ä–∞–Ω–æ–≤—â–∏–∫</option>
                            <option value="–°—Ç—Ä–æ–ø–∞–ª—å—â–∏–∫">–°—Ç—Ä–æ–ø–∞–ª—å—â–∏–∫</option>
                            <option value="–û–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞–Ω–∫–æ–≤">–û–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞–Ω–∫–æ–≤</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-input" id="filterVacancyRegion" placeholder="–†–µ–≥–∏–æ–Ω" onchange="filterVacancies()">
                    </div>
                </div>
                <div id="workerVacanciesList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>

            <div id="workerProfile" class="hidden">
                <div id="profileView"></div>
            </div>

            <div id="workerResponses" class="hidden">
                <div id="myResponsesList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="createProfileScreen" class="hidden">
            <button class="back-btn" onclick="backToWorker()">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h1>
            </div>
            
            <form id="profileForm" onsubmit="submitProfile(event)">
                <div class="form-group">
                    <label class="form-label">–§–ò–û *</label>
                    <input type="text" class="form-input" id="profileName" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" class="form-input" id="profilePhone" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å *</label>
                    <select class="form-select" id="profileSpecialty" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</option>
                        <option value="–°–≤–∞—Ä—â–∏–∫">–°–≤–∞—Ä—â–∏–∫</option>
                        <option value="–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫">–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫</option>
                        <option value="–≠–ª–µ–∫—Ç—Ä–∏–∫">–≠–ª–µ–∫—Ç—Ä–∏–∫</option>
                        <option value="–°–ª–µ—Å–∞—Ä—å">–°–ª–µ—Å–∞—Ä—å</option>
                        <option value="–¢–æ–∫–∞—Ä—å">–¢–æ–∫–∞—Ä—å</option>
                        <option value="–§—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫">–§—Ä–µ–∑–µ—Ä–æ–≤—â–∏–∫</option>
                        <option value="–ú–∞–ª—è—Ä">–ú–∞–ª—è—Ä</option>
                        <option value="–®—Ç—É–∫–∞—Ç—É—Ä">–®—Ç—É–∫–∞—Ç—É—Ä</option>
                        <option value="–ö–∞–º–µ–Ω—â–∏–∫">–ö–∞–º–µ–Ω—â–∏–∫</option>
                        <option value="–ë–µ—Ç–æ–Ω—â–∏–∫">–ë–µ—Ç–æ–Ω—â–∏–∫</option>
                        <option value="–ê—Ä–º–∞—Ç—É—Ä—â–∏–∫">–ê—Ä–º–∞—Ç—É—Ä—â–∏–∫</option>
                        <option value="–ö—Ä–∞–Ω–æ–≤—â–∏–∫">–ö—Ä–∞–Ω–æ–≤—â–∏–∫</option>
                        <option value="–°—Ç—Ä–æ–ø–∞–ª—å—â–∏–∫">–°—Ç—Ä–æ–ø–∞–ª—å—â–∏–∫</option>
                        <option value="–û–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞–Ω–∫–æ–≤">–û–ø–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞–Ω–∫–æ–≤</option>
                        <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã (–ª–µ—Ç) *</label>
                    <input type="number" class="form-input" id="profileExperience" min="0" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–†–µ–≥–∏–æ–Ω –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è *</label>
                    <input type="text" class="form-input" id="profileRegion" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û —Å–µ–±–µ –∏ –Ω–∞–≤—ã–∫–∏</label>
                    <textarea class="form-textarea" id="profileAbout"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ù–∞–ª–∏—á–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</label>
                    <textarea class="form-textarea" id="profileDocuments" placeholder="–ú–µ–¥–∫–Ω–∏–∂–∫–∞, –¥–æ–ø—É—Å–∫–∏, —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è –∏ —Ç.–¥."></textarea>
                </div>
                
                <button type="submit" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
            </form>
        </div>

        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
        <div id="adminScreen" class="hidden">
            <button class="back-btn" onclick="backToWelcome()">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                <p>–ú–æ–¥–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ –≤–∞–∫–∞–Ω—Å–∏–π</p>
            </div>
            
            <div class="tabs">
                <button class="tab active" onclick="switchAdminTab('profiles')">–ü—Ä–æ—Ñ–∏–ª–∏</button>
                <button class="tab" onclick="switchAdminTab('vacancies')">–í–∞–∫–∞–Ω—Å–∏–∏</button>
            </div>

            <div id="adminProfiles">
                <div id="adminProfilesList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>

            <div id="adminVacancies" class="hidden">
                <div id="adminVacanciesList" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∞–∫–∞–Ω—Å–∏–∏ -->
        <div id="vacancyDetailScreen" class="hidden">
            <button class="back-btn" onclick="backFromDetail()">‚Üê –ù–∞–∑–∞–¥</button>
            <div id="vacancyDetail"></div>
        </div>

        <!-- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profileDetailScreen" class="hidden">
            <button class="back-btn" onclick="backFromDetail()">‚Üê –ù–∞–∑–∞–¥</button>
            <div id="profileDetail"></div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentRole = null;
        let currentScreen = 'welcome';
        let currentUserId = tg.initDataUnsafe?.user?.id || Date.now();
        let currentUserName = tg.initDataUnsafe?.user?.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞–º–∏
        function showScreen(screenId) {
            document.querySelectorAll('.container > div').forEach(div => {
                div.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
            currentScreen = screenId;
        }

        function selectRole(role) {
            currentRole = role;
            if (role === 'employer') {
                showScreen('employerScreen');
                loadEmployerData();
            } else {
                showScreen('workerScreen');
                loadWorkerData();
            }
        }

        function backToWelcome() {
            showScreen('welcomeScreen');
            currentRole = null;
        }

        function backToEmployer() {
            showScreen('employerScreen');
        }

        function backToWorker() {
            showScreen('workerScreen');
        }

        function backFromDetail() {
            if (currentRole === 'employer') {
                showScreen('employerScreen');
            } else if (currentRole === 'worker') {
                showScreen('workerScreen');
            } else {
                showScreen('adminScreen');
            }
        }

        // –í–∫–ª–∞–¥–∫–∏ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è
        function switchEmployerTab(tab) {
            document.querySelectorAll('#employerScreen .tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('employerVacancies').classList.add('hidden');
            document.getElementById('employerCandidates').classList.add('hidden');
            document.getElementById('employerResponses').classList.add('hidden');
            
            if (tab === 'vacancies') {
                document.getElementById('employerVacancies').classList.remove('hidden');
                loadVacancies();
            } else if (tab === 'candidates') {
                document.getElementById('employerCandidates').classList.remove('hidden');
                loadCandidates();
            } else if (tab === 'responses') {
                document.getElementById('employerResponses').classList.remove('hidden');
                loadResponses();
            }
        }

        // –í–∫–ª–∞–¥–∫–∏ —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è
        function switchWorkerTab(tab) {
            document.querySelectorAll('#workerScreen .tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('workerVacancies').classList.add('hidden');
            document.getElementById('workerProfile').classList.add('hidden');
            document.getElementById('workerResponses').classList.add('hidden');
            
            if (tab === 'vacancies') {
                document.getElementById('workerVacancies').classList.remove('hidden');
                loadWorkerVacancies();
            } else if (tab === 'profile') {
                document.getElementById('workerProfile').classList.remove('hidden');
                loadProfile();
            } else if (tab === 'myResponses') {
                document.getElementById('workerResponses').classList.remove('hidden');
                loadMyResponses();
            }
        }

        // –í–∫–ª–∞–¥–∫–∏ –∞–¥–º–∏–Ω–∞
        function switchAdminTab(tab) {
            document.querySelectorAll('#adminScreen .tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('adminProfiles').classList.add('hidden');
            document.getElementById('adminVacancies').classList.add('hidden');
            
            if (tab === 'profiles') {
                document.getElementById('adminProfiles').classList.remove('hidden');
                loadAdminProfiles();
            } else if (tab === 'vacancies') {
                document.getElementById('adminVacancies').classList.remove('hidden');
                loadAdminVacancies();
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏
        function showCreateVacancy() {
            showScreen('createVacancyScreen');
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–∏
        async function submitVacancy(event) {
            event.preventDefault();
            
            const vacancy = {
                id: 'vac_' + Date.now(),
                employerId: currentUserId,
                employerName: currentUserName,
                position: document.getElementById('vacancyPosition').value,
                object: document.getElementById('vacancyObject').value,
                region: document.getElementById('vacancyRegion').value,
                salary: document.getElementById('vacancySalary').value,
                schedule: document.getElementById('vacancySchedule').value,
                specialty: document.getElementById('vacancySpecialty').value,
                description: document.getElementById('vacancyDescription').value,
                housing: document.getElementById('vacancyHousing').value,
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            await saveToStorage('vacancy_' + vacancy.id, vacancy, true);
            showNotification('–í–∞–∫–∞–Ω—Å–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é');
            document.getElementById('vacancyForm').reset();
            backToEmployer();
            loadVacancies();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è
        async function loadVacancies() {
            const list = document.getElementById('vacanciesList');
            list.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            
            const keys = await listFromStorage('vacancy_', true);
            const vacancies = [];
            
            for (const key of keys) {
                const vacancy = await getFromStorage(key, true);
                if (vacancy && vacancy.employerId === currentUserId) {
                    vacancies.push(vacancy);
                }
            }
            
            if (vacancies.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìã</div><p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–π</p></div>';
                return;
            }
            
            list.innerHTML = vacancies.map(v => `
                <div class="card" onclick="showVacancyDetail('${v.id}', 'employer')">
                    <div class="card-title">${v.position}</div>
                    <div class="card-info">üìç ${v.object}, ${v.region}</div>
                    <div class="card-info">üí∞ ${parseInt(v.salary).toLocaleString()} ‚ÇΩ</div>
                    <div class="card-info">üìÖ ${v.schedule}</div>
                    <span class="badge badge-${v.status}">${getStatusText(v.status)}</span>
                </div>
            `).join('');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
        async function loadCandidates() {
            const list = document.getElementById('candidatesList');
            list.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            
            const keys = await listFromStorage('profile_', true);
            const profiles = [];
            
            for (const key of keys) {
                const profile = await getFromStorage(key, true);
                if (profile && profile.status === 'approved') {
                    profiles.push(profile);
                }
            }
            
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π
            const specialties = [...new Set(profiles.map(p => p.specialty))];
            const filterSelect = document.getElementById('filterSpecialty');
            filterSelect.innerHTML = '<option value="">–í—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</option>' + 
                specialties.map(s => `<option value="${s}">${s}</option>`).join('');
            
            displayCandidates(profiles);
        }

        function displayCandidates(profiles) {
            const list = document.getElementById('candidatesList');
            
            if (profiles.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üë•</div><p>–ö–∞–Ω–¥–∏–¥–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p></div>';
                return;
            }
            
            list.innerHTML = profiles.map(p => `
                <div class="card" onclick="showProfileDetail('${p.id}', 'employer')">
                    <div class="card-title">${p.name}</div>
                    <div class="card-info">üîß ${p.specialty}</div>
                    <div class="card-info">üìä –û–ø—ã—Ç: ${p.experience} ${getYearsText(p.experience)}</div>
                    <div class="card-info">üìç ${p.region}</div>
                    <div class="card-info">üìû ${p.phone}</div>
                </div>
            `).join('');
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
        async function filterCandidates() {
            const specialty = document.getElementById('filterSpecialty').value;
            const experience = document.getElementById('filterExperience').value;
            
            const keys = await listFromStorage('profile_', true);
            let profiles = [];
            
            for (const key of keys) {
                const profile = await getFromStorage(key, true);
                if (profile && profile.status === 'approved') {
                    profiles.push(profile);
                }
            }
            
            if (specialty) {
                profiles = profiles.filter(p => p.specialty === specialty);
            }
            
            if (experience) {
                const [min, max] = experience.includes('+') ? [5, 100] : experience.split('-').map(Number);
                profiles = profiles.filter(p => {
                    const exp = parseInt(p.experience);
                    return exp >= min && (max ? exp <= max : true);
                });
            }
            
            displayCandidates(profiles);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∫–ª–∏–∫–æ–≤
        async function loadResponses() {
            const list = document.getElementById('responsesList');
            list.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            
            const keys = await listFromStorage('response_', true);
            const responses = [];
            
            for (const key of keys) {
                const response = await getFromStorage(key, true);
                if (response) {
                    const vacancy = await getFromStorage('vacancy_' + response.vacancyId, true);
                    if (vacancy && vacancy.employerId === currentUserId) {
                        const profile = await getFromStorage('profile_' + response.workerId, true);
                        responses.push({...response, vacancy, profile});
                    }
                }
            }
            
            if (responses.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üì¨</div><p>–û—Ç–∫–ª–∏–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p></div>';
                return;
            }
            
            list.innerHTML = responses.map(r => `
                <div class="card" onclick="showProfileDetail('${r.workerId}', 'employer')">
                    <div class="card-title">${r.profile.name}</div>
                    <div class="card-info">–ù–∞ –≤–∞–∫–∞–Ω—Å–∏—é: ${r.vacancy.position}</div>
                    <div class="card-info">üîß ${r.profile.specialty}</div>
                    <div class="card-info">üìä –û–ø—ã—Ç: ${r.profile.experience} ${getYearsText(r.profile.experience)}</div>
                    <div class="card-info">üìû ${r.profile.phone}</div>
                    <div class="card-info">üìÖ ${new Date(r.createdAt).toLocaleDateString('ru-RU')}</div>
                </div>
            `).join('');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è
        async function loadEmployerData() {
            loadVacancies();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è
        async function loadWorkerVacancies() {
            const list = document.getElementById('workerVacanciesList');
            list.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            
            const keys = await listFromStorage('vacancy_', true);
            let vacancies = [];
            
            for (const key of keys) {
                const vacancy = await getFromStorage(key, true);
                if (vacancy && vacancy.status === 'approved') {
                    vacancies.push(vacancy);
                }
            }
            
            displayWorkerVacancies(vacancies);
        }

        function displayWorkerVacancies(vacancies) {
            const list = document.getElementById('workerVacanciesList');
            
            if (vacancies.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üíº</div><p>–í–∞–∫–∞–Ω—Å–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p></div>';
                return;
            }
            
            list.innerHTML = vacancies.map(v => `
                <div class="card" onclick="showVacancyDetail('${v.id}', 'worker')">
                    <div class="card-title">${v.position}</div>
                    <div class="card-info">üìç ${v.object}, ${v.region}</div>
                    <div class="card-info">üí∞ ${parseInt(v.salary).toLocaleString()} ‚ÇΩ</div>
                    <div class="card-info">üìÖ ${v.schedule}</div>
                    <div class="card-info">üîß ${v.specialty}</div>
                </div>
            `).join('');
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–∞–∫–∞–Ω—Å–∏–π
        async function filterVacancies() {
            const specialty = document.getElementById('filterVacancySpecialty').value;
            const region = document.getElementById('filterVacancyRegion').value.toLowerCase();
            
            const keys = await listFromStorage('vacancy_', true);
            let vacancies = [];
            
            for (const key of keys) {
                const vacancy = await getFromStorage(key, true);
                if (vacancy && vacancy.status === 'approved') {
                    vacancies.push(vacancy);
                }
            }
            
            if (specialty) {
                vacancies = vacancies.filter(v => v.specialty === specialty);
            }
            
            if (region) {
                vacancies = vacancies.filter(v => v.region.toLowerCase().includes(region));
            }
            
            displayWorkerVacancies(vacancies);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è
        async function loadProfile() {
            const profileView = document.getElementById('profileView');
            const profile = await getFromStorage('profile_' + currentUserId, true);
            
            if (!profile) {
                profileView.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üë§</div>
                        <p>–£ –≤–∞—Å –µ—â—ë –Ω–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è</p>
                    </div>
                    <button class="btn" onclick="showCreateProfile()">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                `;
                return;
            }
            
            profileView.innerHTML = `
                <div class="card">
                    <div class="card-title">${profile.name}</div>
                    <div class="card-info">üìû ${profile.phone}</div>
                    <div class="card-info">üîß ${profile.specialty}</div>
                    <div class="card-info">üìä –û–ø—ã—Ç: ${profile.experience} ${getYearsText(profile.experience)}</div>
                    <div class="card-info">üìç ${profile.region}</div>
                    ${profile.about ? `<div class="card-info" style="margin-top: 12px;">${profile.about}</div>` : ''}
                    ${profile.documents ? `<div class="card-info" style="margin-top: 8px;">üìÑ ${profile.documents}</div>` : ''}
                    <span class="badge badge-${profile.status}">${getStatusText(profile.status)}</span>
                </div>
                <button class="btn" onclick="showEditProfile()">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
            `;
        }

        function showCreateProfile() {
            showScreen('createProfileScreen');
        }

        async function showEditProfile() {
            showScreen('createProfileScreen');
            const profile = await getFromStorage('profile_' + currentUserId, true);
            
            if (profile) {
                document.getElementById('profileName').value = profile.name;
                document.getElementById('profilePhone').value = profile.phone;
                document.getElementById('profileSpecialty').value = profile.specialty;
                document.getElementById('profileExperience').value = profile.experience;
                document.getElementById('profileRegion').value = profile.region;
                document.getElementById('profileAbout').value = profile.about || '';
                document.getElementById('profileDocuments').value = profile.documents || '';
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
        async function submitProfile(event) {
            event.preventDefault();
            
            const profile = {
                id: currentUserId,
                userId: currentUserId,
                name: document.getElementById('profileName').value,
                phone: document.getElementById('profilePhone').value,
                specialty: document.getElementById('profileSpecialty').value,
                experience: document.getElementById('profileExperience').value,
                region: document.getElementById('profileRegion').value,
                about: document.getElementById('profileAbout').value,
                documents: document.getElementById('profileDocuments').value,
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            await saveToStorage('profile_' + profile.id, profile, true);
            showNotification('–ü—Ä–æ—Ñ–∏–ª—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é');
            document.getElementById('profileForm').reset();
            backToWorker();
            loadProfile();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–∏—Ö –æ—Ç–∫–ª–∏–∫–æ–≤
        async function loadMyResponses() {
            const list = document.getElementById('myResponsesList');
            list.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            
            const keys = await listFromStorage('response_', true);
            const responses = [];
            
            for (const key of keys) {
                const response = await getFromStorage(key, true);
                if (response && response.workerId === currentUserId) {
                    const vacancy = await getFromStorage('vacancy_' + response.vacancyId, true);
                    responses.push({...response, vacancy});
                }
            }
            
            if (responses.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìù</div><p>–í—ã –µ—â—ë –Ω–µ –æ—Ç–∫–ª–∏–∫–∞–ª–∏—Å—å –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏–∏</p></div>';
                return;
            }
            
            list.innerHTML = responses.map(r => `
                <div class="card" onclick="showVacancyDetail('${r.vacancyId}', 'worker')">
                    <div class="card-title">${r.vacancy.position}</div>
                    <div class="card-info">üìç ${r.vacancy.object}, ${r.vacancy.region}</div>
                    <div class="card-info">üí∞ ${parseInt(r.vacancy.salary).toLocaleString()} ‚ÇΩ</div>
                    <div class="card-info">üìÖ –û—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å: ${new Date(r.createdAt).toLocaleDateString('ru-RU')}</div>
                </div>
            `).join('');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∏—Å–∫–∞—Ç–µ–ª—è
        async function loadWorkerData() {
            loadWorkerVacancies();
        }

        // –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
        function showAdminPanel() {
            showScreen('adminScreen');
            loadAdminProfiles();
        }

        async function loadAdminProfiles() {
            const list = document.getElementById('adminProfilesList');
            list.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            
            const keys = await listFromStorage('profile_', true);
            const profiles = [];
            
            for (const key of keys) {
                const profile = await getFromStorage(key, true);
                if (profile) {
                    profiles.push(profile);
                }
            }
            
            if (profiles.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üë•</div><p>–ü—Ä–æ—Ñ–∏–ª–µ–π –Ω–µ—Ç</p></div>';
                return;
            }
            
            list.innerHTML = profiles.map(p => `
                <div class="card" onclick="showProfileDetail('${p.id}', 'admin')">
                    <div class="card-title">${p.name}</div>
                    <div class="card-info">üîß ${p.specialty}</div>
                    <div class="card-info">üìä –û–ø—ã—Ç: ${p.experience} ${getYearsText(p.experience)}</div>
                    <div class="card-info">üìç ${p.region}</div>
                    <span class="badge badge-${p.status}">${getStatusText(p.status)}</span>
                </div>
            `).join('');
        }

        async function loadAdminVacancies() {
            const list = document.getElementById('adminVacanciesList');
            list.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>';
            
            const keys = await listFromStorage('vacancy_', true);
            const vacancies = [];
            
            for (const key of keys) {
                const vacancy = await getFromStorage(key, true);
                if (vacancy) {
                    vacancies.push(vacancy);
                }
            }
            
            if (vacancies.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üíº</div><p>–í–∞–∫–∞–Ω—Å–∏–π –Ω–µ—Ç</p></div>';
                return;
            }
            
            list.innerHTML = vacancies.map(v => `
                <div class="card" onclick="showVacancyDetail('${v.id}', 'admin')">
                    <div class="card-title">${v.position}</div>
                    <div class="card-info">üìç ${v.object}, ${v.region}</div>
                    <div class="card-info">üí∞ ${parseInt(v.salary).toLocaleString()} ‚ÇΩ</div>
                    <div class="card-info">–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å: ${v.employerName}</div>
                    <span class="badge badge-${v.status}">${getStatusText(v.status)}</span>
                </div>
            `).join('');
        }

        // –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∞–∫–∞–Ω—Å–∏–∏
        async function showVacancyDetail(vacancyId, source) {
            showScreen('vacancyDetailScreen');
            const vacancy = await getFromStorage('vacancy_' + vacancyId, true);
            
            if (!vacancy) {
                document.getElementById('vacancyDetail').innerHTML = '<p>–í–∞–∫–∞–Ω—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</p>';
                return;
            }
            
            let buttons = '';
            
            if (source === 'worker') {
                const hasResponse = await checkResponse(vacancyId, currentUserId);
                const profile = await getFromStorage('profile_' + currentUserId, true);
                
                if (!profile) {
                    buttons = '<button class="btn btn-secondary" onclick="showCreateProfile()">–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å</button>';
                } else if (profile.status !== 'approved') {
                    buttons = '<button class="btn btn-secondary" disabled>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</button>';
                } else if (hasResponse) {
                    buttons = '<button class="btn btn-secondary" disabled>–í—ã —É–∂–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å</button>';
                } else {
                    buttons = `<button class="btn" onclick="applyToVacancy('${vacancyId}')">–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è</button>`;
                }
            } else if (source === 'admin') {
                if (vacancy.status === 'pending') {
                    buttons = `
                        <div class="action-buttons">
                            <button class="btn" onclick="moderateVacancy('${vacancyId}', 'approved')">‚úì –û–¥–æ–±—Ä–∏—Ç—å</button>
                            <button class="btn btn-danger" onclick="moderateVacancy('${vacancyId}', 'rejected')">‚úó –û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                        </div>
                    `;
                }
            }
            
            document.getElementById('vacancyDetail').innerHTML = `
                <div class="header">
                    <h1>${vacancy.position}</h1>
                    <p>${vacancy.specialty}</p>
                </div>
                
                <div class="detail-section">
                    <h3>–û–±—ä–µ–∫—Ç</h3>
                    <p>${vacancy.object}</p>
                </div>
                
                <div class="detail-section">
                    <h3>–†–µ–≥–∏–æ–Ω</h3>
                    <p>${vacancy.region}</p>
                </div>
                
                <div class="detail-section">
                    <h3>–ó–∞—Ä–ø–ª–∞—Ç–∞</h3>
                    <p>${parseInt(vacancy.salary).toLocaleString()} ‚ÇΩ</p>
                </div>
                
                <div class="detail-section">
                    <h3>–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã</h3>
                    <p>${vacancy.schedule}</p>
                </div>
                
                ${vacancy.description ? `
                    <div class="detail-section">
                        <h3>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏</h3>
                        <p>${vacancy.description}</p>
                    </div>
                ` : ''}
                
                ${vacancy.housing ? `
                    <div class="detail-section">
                        <h3>–£—Å–ª–æ–≤–∏—è –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è</h3>
                        <p>${vacancy.housing}</p>
                    </div>
                ` : ''}
                
                <div class="detail-section">
                    <h3>–°—Ç–∞—Ç—É—Å</h3>
                    <p><span class="badge badge-${vacancy.status}">${getStatusText(vacancy.status)}</span></p>
                </div>
                
                ${buttons}
            `;
        }

        // –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è
        async function showProfileDetail(profileId, source) {
            showScreen('profileDetailScreen');
            const profile = await getFromStorage('profile_' + profileId, true);
            
            if (!profile) {
                document.getElementById('profileDetail').innerHTML = '<p>–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω</p>';
                return;
            }
            
            let buttons = '';
            
            if (source === 'admin' && profile.status === 'pending') {
                buttons = `
                    <div class="action-buttons">
                        <button class="btn" onclick="moderateProfile('${profileId}', 'approved')">‚úì –û–¥–æ–±—Ä–∏—Ç—å</button>
                        <button class="btn btn-danger" onclick="moderateProfile('${profileId}', 'rejected')">‚úó –û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                    </div>
                `;
            }
            
            document.getElementById('profileDetail').innerHTML = `
                <div class="header">
                    <h1>${profile.name}</h1>
                    <p>${profile.specialty}</p>
                </div>
                
                <div class="detail-section">
                    <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                    <p>üìû ${profile.phone}</p>
                </div>
                
                <div class="detail-section">
                    <h3>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</h3>
                    <p>${profile.experience} ${getYearsText(profile.experience)}</p>
                </div>
                
                <div class="detail-section">
                    <h3>–†–µ–≥–∏–æ–Ω</h3>
                    <p>${profile.region}</p>
                </div>
                
                ${profile.about ? `
                    <div class="detail-section">
                        <h3>–û —Å–µ–±–µ –∏ –Ω–∞–≤—ã–∫–∏</h3>
                        <p>${profile.about}</p>
                    </div>
                ` : ''}
                
                ${profile.documents ? `
                    <div class="detail-section">
                        <h3>–î–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                        <p>${profile.documents}</p>
                    </div>
                ` : ''}
                
                <div class="detail-section">
                    <h3>–°—Ç–∞—Ç—É—Å</h3>
                    <p><span class="badge badge-${profile.status}">${getStatusText(profile.status)}</span></p>
                </div>
                
                ${buttons}
            `;
        }

        // –û—Ç–∫–ª–∏–∫ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é
        async function applyToVacancy(vacancyId) {
            const response = {
                id: 'resp_' + Date.now(),
                vacancyId: vacancyId,
                workerId: currentUserId,
                createdAt: new Date().toISOString()
            };
            
            await saveToStorage('response_' + response.id, response, true);
            showNotification('–û—Ç–∫–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—é');
            backFromDetail();
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ—Ç–∫–ª–∏–∫–∞
        async function checkResponse(vacancyId, workerId) {
            const keys = await listFromStorage('response_', true);
            
            for (const key of keys) {
                const response = await getFromStorage(key, true);
                if (response && response.vacancyId === vacancyId && response.workerId === workerId) {
                    return true;
                }
            }
            
            return false;
        }

        // –ú–æ–¥–µ—Ä–∞—Ü–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏
        async function moderateVacancy(vacancyId, status) {
            const vacancy = await getFromStorage('vacancy_' + vacancyId, true);
            vacancy.status = status;
            await saveToStorage('vacancy_' + vacancyId, vacancy, true);
            
            showNotification(status === 'approved' ? '–í–∞–∫–∞–Ω—Å–∏—è –æ–¥–æ–±—Ä–µ–Ω–∞' : '–í–∞–∫–∞–Ω—Å–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞');
            backFromDetail();
            loadAdminVacancies();
        }

        // –ú–æ–¥–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        async function moderateProfile(profileId, status) {
            const profile = await getFromStorage('profile_' + profileId, true);
            profile.status = status;
            await saveToStorage('profile_' + profileId, profile, true);
            
            showNotification(status === 'approved' ? '–ü—Ä–æ—Ñ–∏–ª—å –æ–¥–æ–±—Ä–µ–Ω' : '–ü—Ä–æ—Ñ–∏–ª—å –æ—Ç–∫–ª–æ–Ω–µ–Ω');
            backFromDetail();
            loadAdminProfiles();
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getStatusText(status) {
            const statuses = {
                pending: '–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏',
                approved: '–û–¥–æ–±—Ä–µ–Ω–æ',
                rejected: '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ'
            };
            return statuses[status] || status;
        }

        function getYearsText(years) {
            const num = parseInt(years);
            if (num === 1) return '–≥–æ–¥';
            if (num >= 2 && num <= 4) return '–≥–æ–¥–∞';
            return '–ª–µ—Ç';
        }

        function showNotification(text) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = text;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // –†–∞–±–æ—Ç–∞ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
        async function saveToStorage(key, value, shared = false) {
            try {
                await window.storage.set(key, JSON.stringify(value), shared);
            } catch (error) {
                console.error('Error saving to storage:', error);
            }
        }

        async function getFromStorage(key, shared = false) {
            try {
                const result = await window.storage.get(key, shared);
                return result ? JSON.parse(result.value) : null;
            } catch (error) {
                console.error('Error getting from storage:', error);
                return null;
            }
        }

        async function listFromStorage(prefix, shared = false) {
            try {
                const result = await window.storage.list(prefix, shared);
                return result ? result.keys : [];
            } catch (error) {
                console.error('Error listing from storage:', error);
                return [];
            }
        }
    </script>
</body>
</html>
